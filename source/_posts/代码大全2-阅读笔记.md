---
title: 代码大全2 阅读笔记
date: 2016-06-30 23:52:11
tags:
---

# 第一章 欢迎进入软件构建的世界

> 整体规划对于实现的重要性
> 代码大全讲解的编程的本质，而不是xxx语言的高级编程
> 复杂的结构需要复杂的规划
> bug发现的时间越长，那么修复的成本就越高
> 假如没有好的需求，你可能对项目有整体的把握，但是却不能击中问题
> 既不快也不慢的开发方式，产生的错误是最多的
> 相比大规模的修改，小修小补产生的错误更多


***
# 第二章 用隐喻更充分地理解软件开发
> 不同类型的开发，需要使用不同的开发方式，大概就是乡村小屋和CBD大厦的区别


***
# 第三章 三思而后行：前期工作

#### 测试保证产品完整质量，但是并不能推测是否正确的创造了一个产品或者这是一个错误的产品，所以前期的准备工作十分重要
#### 程序员，不做前期工作的原因有二
> 急于编码实现
> 项目管理人没有耐心花费时间来进行前期工作

#### bug被发现的时间越长，对系统的损害越大，修复成本越高，所以前期工作十分重要
#### 比喻：在射击前，你确信瞄准了靶心？
#### 需求的审核是必要的步骤，假如到达了架构、射击、编码阶段，那么修复错误的需求的成本十分高昂
#### 需要控制需求的变化，频繁的变化，导致跟不上项目进度

## 需求核对表
### 针对功能的需求
> 是否详细定义了全部输入，包括来源、精度、取值范围、出现频率
> 输出（同上）
> 是否详细定义了所有输出的格式
> 是否详细定义了所有硬件及软件的外部接口
> 协议的定义？握手，纠错，通讯
> 列出了用户想要做的全部事情？

### 针对非功能的需求(略)
### 需求质量（略）
### 需求的完备性（略）

## 架构的组成
#### 如果系统中的某个角色没有清晰的构思，编写这个类将会是令人沮丧的
#### 定义程序的主要构造块：构造块可能是一个类或者一组类和子程序，诸如，交互程序，web页面，解释命令，业务规则，访问数据库等
#### 定义主要的类：
> 架构应定义所用的主要的类，以及其职责，及于其他类的交互，应包含继承，状态转换，对象持久化

#### 架构的规则： 应对构成80%行为的20%的类进行详细的描述
#### 数据设计：架构应描述文件和表的设计，并给出理由，应解析所用数据库的高层组织结构和内容
#### 业务规则：如果架构依赖于业务规则，则应该详细描述业务规则
#### UI设计：架构应定义web页面的格式，GUI，CLI等主要元素。应模块化设计，确保替换UI，不影响业务和输出
#### 资源管理：如DB连接，线程，内存，句柄等。如果需要主动管理，那么应认真架构设计资源管理器
#### 安全性：
> 架构应该建立一个威胁模型，如缓冲区，非受信数据（如用户输入，cookie，配置，其他外部接口的输入数据等）的加密、规则、错误消息的细致程度等其他事项

#### 性能：架构应该定义资源的优化顺序（不同系统不相同），提供可估数据，解析为什么架构能达到这样的性能
#### 可伸缩性
> 架构应该描述如何应对用户数，服务器数量，网络节点，数据库记录数量，交易数量的增长

#### 互用性：如预计与其他系统共享数据或者资源，应该描述如何完成
#### 国际化
> 考虑所用字符集，如何在不改动代码的情况下，维护这些字符串

#### 错误处理：据统计，有90%以上的代码用户处理错误
> 定义纠正错误，还是仅仅进行错误检测
> 定义主动处理还是被动处理
> 如何传播错误消息
> 错误消息的处理约定
> 如何处理异常，何时抛出，什么地方捕获，如何记录日志

#### 容错性：（这是一个复杂的主题，超出本书，略）
> 出错，重新执行代码
> 出错，执行备用代码
> 出错，通过多个程序的运行结果来去中值等

#### 变更策略：
> 应描述变更策略
> 考虑所有将增强的功能


***
# 第四章 关键的构建决策
> 本章节主要介绍选择什么语言开发，测试方式，代码约定，框架等等。


***
# 第五章 软件构建中的设计

#### 设计的险恶
> 要解决或部分解决问题，才能够明确定义设计。然后通过再次解决问题，形成一个可执行的方案
> 设计是没有章法的，因为优劣之间的区分十分微妙，难以把握
> 设计是自然而言的，不断经历设计、评估、设计...的过程

#### 管理复杂度的重要性
> 层次性：假如你编写一个新的系统，其中用到很多设计不佳的代码，可编写一个与旧代码交互的层，同时新的层次提供一致的服务，这样就无需与旧代码进行交互
> 标准化：古怪的东西，别人第一次理解越是头疼，尽量标准化，常用的方法，让系统给人熟悉的感觉

#### 设计的层次
> 系统分解成子系统和包
> 子系统和包分解成类
> 类分解成数据和子程序
> 子程序内部的设计

#### 如何分解子系统和包
> 如DB，UI，业务规则，命令解析器，报表引擎，并清晰定义各子系统如何使用其他子系统（无循环调用结构）

#### 信息隐藏
> 该Id而用随机字符串在隐藏信息（否则别人可以通过id增加来查找信息）
> 通过隐藏信息来促成好的设计方案
> 信息隐藏使得修改程序更加容易（如多入口程序，需要解决的问题很多）
> 激发和促使某些设计决策的形成
> 有助于设计类的公开接口

#### 找出容易变化的区域
> 找出容易变化的项目，把容易变化的组件划分成类
> 将容易变化的项目隔离
> 业务规则：是软件频繁变化的根源
> 对硬件的依赖：使容易移植到新的硬件环境
> 输入和输出：比如格式的变化
> 非标准的语言特性：可能下一个版本就变化
> 困难的设计和构建区域：随时可能要重新做
> 状态变量：随系统增大而增多

#### 设计实践
> 分而治之：没有人的大脑能容纳复杂的程序设计，必须迭代。理解问题-》形成计划》执行计划
> 自上而下的设计：从一般的类开始，分解成具体的类（分解策略）
> 自下而上的设计：上一个设计，过于抽象，难以入手，可先确认系统做什么，找出具体的对象和职责，再找出通用的对象，按适当的方式组织起来，而更上层的工作，或回到自上而下的设计



***
# 第六章 可以工作的类
